{% extends 'base.html' %}

{% block content %}

	<div class="row g-0 ">

		<div class="col-md-5 g-0 justify-content-center" >
			<div class="leftside flex justify-content-center align-items-center padding-top-10 " style="height: 165vh; width: 100%;background:#F5F5F5 ; margin-top: 10; ">				
			
				<div class="col center text-center " >
	
					<img class="rounded-circle account-img" src="{{ user.profile.profile_pic.url }}" style="width: 40%; margin-top: 60px">
					<h2 class="font-weight-bold" style="align-content: center;font-size: 40px; color:#515A5A; font-weight: bold;">{{ user.username }}</h2>
					<h6 class="" style="align-content: center; color: black; margin-top: 5px "><i class="bi bi-pencil" style="margin-right: 5px"></i>{{ user.profile.year_level }}</h6>
					<h6 class="" style="align-content: center; color: black; "><i class="bi bi-telephone-fill" style="margin-right: 5px"></i>{{ user.profile.phone_number }}</h6>
					<h6 class="" style="align-content: center; color: black; "><i class="bi bi-link" style="margin-right: 5px"></i>{{ user.profile.sns_account }}</h6>
					<h6 class="" style="align-content: center; color: black; ">{{ user.profile.bio }}</h6>
				</div>

			</div>
					
		</div>

		<div class="col-md-6 g-0">
			<div class=" rightside justify-content-center align-items-center"  style="height: 100vh; width: 100%;" >

				<h2 class="font-weight-bold" style="align-content: right;font-size: 25px; color:#DBCA46; font-weight: bold; margin-left: 20px; margin-top: 30px;font-family: sans-serif;">Your Posts</h2>

				<hr style="width:110%;text-align:left;margin-left:20px">

					<div class="container" style="margin-left: 35px;margin-top: 2px;">

				<!--timeline container-->
				<div class="col-" style="margin-bottom: 20px; margin-left: 600px">
					<div class="dropdown">
							<button class="btn btn-light dropdown-toggle" type="button" id="filterDropdown" data-bs-toggle="dropdown" aria-expanded="false">
							<i class="bi bi-funnel-fill" style="color:#909911;"></i>
							Filter
							</button>
							<ul class="dropdown-menu" aria-labelledby="filterdropdownmenu">
								<li><button class="dropdown-item" type="button">All Posts</button></li>
								<li><button class="dropdown-item" type="submit" id="sell" name="sell" formmethod="post">Sell<a href="esko_app/profile"></a></button></li>
								<li><button class="dropdown-item" type="button">Services</button></li>
								<li><button class="dropdown-item" type="button">Swap</button></li>
								<li><button class="dropdown-item" type="button">Find</button></li>
							</ul>
					</div>
				</div>
					{% if messages %}
						{% for message in messages %}
							<div class="alert alert-success">
								{{ message }}
							</div>

						{% endfor %}

					{% endif %}

								
				<div class="row px-1 pl-1 pt-1 pb-3" style="width: 110%">					
					<div class="row mx-auto py-2">


						{% for post in posts %}
							<!-- {% if post.author == user %} -->

						<!--individual posts-->
						<div class="card py-3 " style="margin-bottom: 7px" >
							<!--profile picture, username, category-->
								<div class="row px-3 py-1">
									<div class="col-auto px-0">
										<img src="{{ post.author.profile.profile_pic.url }}" class="rounded-circle" style="width:40px">
									</div>
									<div class="col-auto me-auto">
										<h5 class="card-title">{{ post.author }}</h5>
										<small class="text-muted">{{ post.date|date:"F d, Y" }}</small>
									</div>
									<div class="col-auto">
										<button type="button" class="btn btn-sm btn-secondary">{{ post.category }}</button>
										<button type="button" class="btn btn-sm btn-light ms-2" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi bi-three-dots"></i></button>
										<ul class="dropdown-menu" aria-labelledby="filterdropdownmenu">
											<li><button class="dropdown-item" type="button">
												
												<a class="dropdown-item" style="text-decoration: none;color: inherit;" href="#"><i class="bi bi-flag-fill">Report</i></a></button></li>
														
											<!-- if own post -->
											{% if post.author == user %}

											<li><button class="dropdown-item" type="button" >
												<a class="dropdown-item" style="text-decoration: none;color: inherit;" href="/esko_app/post/{{post.id}}/delete/">
													<i class="bi bi-trash-fill">Delete</i></a>
											</button></li>

											<li><button class="dropdown-item" type="button"><a class="dropdown-item" style="text-decoration: none;color: inherit;" href="/esko_app/post/{{post.id}}/update/"><i class="bi bi-pen-fill">Edit</i></a></button></li>
											{% endif %}
										</ul>
									</div>
								</div>
							<!--content-->
							<div class="row px-4 py-1">
								<p class="card-text" style="margin-left: 30px">
								<a class="card-text" style="text-decoration: none;color: inherit;" href="/esko_app/post/{{post.id}}">{{post.description}} </a></p>
								<!-- <img  src= "{{ user.post.post_image.url }}" style="width: 100%; margin-top: 60px"> -->
								<p class="text-muted" style="margin-left: 30px">{{post.tags}}</p>
							</div>
							
						

							<!--replies, likes-->
							<div class="row px-3 py-1">
								<div class="col-auto me-auto">
									<button type="button" class="btn" style="background:white; font-size:1.1rem; color:#909911"><i class="bi bi-reply-fill"></i>Replies</button>
								</div>
								<div class="col-auto">
								<form action="{% url 'esko_app:like_post' post.id %}" method="POST">
									{% csrf_token %}
									
									<button type="submit" name="post_id" value="{{ post.id }}" class="btn" style="background:white; font-size:1.1rem; color:#909911;"><i class="bi bi-heart-fill"></i></button> {{ total_likes }} Likes
									
								</form>
								</div>
							</div>
						</div>
						<!-- {% endif %} -->
						{% endfor %}
					</div>
			</div>

											
		</div>
	</div>		
	</div>

<!-- Delete post modal-->
<!-- <div class="modal fade" id="deletePostModal" tabindex="-1" role="dialog" aria-labelledby="deletePostModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="deletePostModal">Delete Post</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        Are you sure you want to delete this post?
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        <button type="button" class="btn btn-danger">Delete</button>
      </div>
    </div>
  </div>
</div>
 -->


		
	
{% endblock %}